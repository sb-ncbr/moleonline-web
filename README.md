
# MOLEonline

MOLEonline web interface provides direct access to MOLE functionality and enables online and easy-to-use interactive channel analysis.

MOLE 2.5 is a universal toolkit for rapid and fully automated location and characterisation of channels, tunnels and pores in (bio)macromolecular structures, e.g., proteins, RNA, DNA and biomacromolecular assemblies.

Our latest version of MOLEonline brings many notable improvements, including:

- Replacement of deprecated LiteMol with the modern Mol* viewer,
- colour the tunnels in the 3D view according to their physicochemical properties,
- a new 2D view of the structure and calculated tunnels is generated by 2DProts,
- ability to store tunnels into the mmCIF file,
- ability to store and load computation settings.

## Deployment

### Devel

To run the MOLEonline front end locally, you need to have Docker installed. The app listens on port 8080 unless specified otherwise by setting the environment variable MOLEONLINE_PORT. The complete run is as simple as:

```bash
git clone https://github.com/sb-ncbr/moleonline-web
cd moleonline-web
docker compose -f docker/docker-compose.yaml up --build
# Alternatively, when using a different port, use:
# MOLEONLINE_PORT=8888 docker compose -f docker/docker-compose.yaml up
```

### Production

For production, you need to have a certbot installed with Let's Encrypt certificates (using [certbot](https://certbot.eff.org/instructions?ws=other&os=snap)) for both `moleonline.cz` and `moleonline.biodata.ceitec.cz` domains. Assuming running Ubuntu 24.04 LTS, use the following commands to run the application:

```bash
# 0. Clone the repository into /home/ubuntu/moleonline-web
git clone https://github.com/sb-ncbr/moleonline-web

# 1. Install certbot and issue the certificates
# - Follow certbot instructions
# - Use moleonline.biodata.ceitec.cz domain first, then moleonline.cz
sudo snap install certbot
sudo certbot certonly --standalone

# 2. Setup certificates renewal cron job
cp /home/ubuntu/moleonline-web/docker/renew_certificates.sh /usr/local/bin
chmod +x /usr/local/bin/renew_certificates.sh
ln -s /usr/local/bin/renew_certificates.sh /etc/cron.weekly/renew_certificates.sh

# 3. Build and run the application
# - Application assumes the certificates stored on the host in /etc/letsencrypt/live/moleonline.biodata.ceitec.cz directory
cd /home/ubuntu/moleonline-web
docker compose -f docker/docker-compose.yaml -f docker/docker-compose.production.yaml build
docker compose -f docker/docker-compose.yaml -f docker/docker-compose.production.yaml up
```
